# 製品構成デザインツール

自動車などの製品の部品構成を木構造で表現し、制約評価・価格計算・リスク評価を行うインタラクティブなデモアプリケーションです。

## 背景

自動車などの機器の構成を初期検討する際、様々なバリエーションの部品構成があり、それぞれに制約、価格、リスクが異なります。このツールは過去の事例や構成情報、トラブルメモを活用しながら、最適な製品設計を検討するための支援ツールです。

## 主な機能

### 1. 木構造による製品構成の可視化
- 製品の構成要素を階層的な木構造で表現
- 各選択ポイント（接点）で部品を選択
- リアルタイムで構成を組み立て

### 2. 制約評価
- 部品間の互換性チェック
- 技術的な制約の検証
- エラー、警告、情報の3段階で制約違反を表示

### 3. 価格計算
- 選択した部品の合計価格を自動計算
- 部品ごとの価格内訳を表示
- 価格情報が不足している部品の警告

### 4. リスク評価
- 過去事例に基づくリスクスコアの算出
- 成功事例、問題事例、警告の表示
- 関連する過去事例の参照

## UI構成

### 左ペイン：部品構成ツリー
- 階層的な木構造で製品構成を表示
- 各選択ポイントでドロップダウンから部品を選択
- 選択した部品の詳細情報（説明、価格）を表示

### 右ペイン上部：制約と過去事例
- **制約一覧**：すべての制約ルールを表示
  - エラー（赤）：組み合わせ不可
  - 警告（黄）：推奨されない
  - 情報（青）：推奨される組み合わせ
- **過去事例**：関連する成功事例、問題事例、警告を表示

### 右ペイン下部：評価実行と結果
- **制約評価ボタン**：現在の構成を評価
- **評価結果表示**：
  - 合計価格と内訳
  - リスクスコア（1-10段階）
  - 制約違反の一覧
  - 警告メッセージ

## 技術スタック

- **React 19** - UIフレームワーク
- **TypeScript** - 型安全な開発
- **Vite** - 高速ビルドツール
- **TailwindCSS** - ユーティリティファーストCSS
- **React Flow** - フローチャート・グラフ可視化（依存関係のみ）

## セットアップ

### 必要な環境
- Node.js 18以上
- npm または yarn

### インストール

```bash
# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev

# プロダクションビルド
npm run build

# プレビュー
npm run preview
```

## サンプルデータ

自動車の部品構成を例として以下のデータを用意しています：

### 部品カテゴリ
- **エンジン**: ガソリン1.5L, ガソリン2.0L, ディーゼル2.0L, ハイブリッド
- **トランスミッション**: 5速MT, 6速AT, CVT
- **タイヤ**: 16インチ標準, 17インチスポーツ, 18インチプレミアム
- **ブレーキ**: 標準ディスク, 大径ベンチレーテッド, カーボンセラミック
- **サスペンション**: 標準, スポーツ
- **インテリア**: ファブリック, レザー, スポーツシート

### 制約例
- ハイブリッド × 5速MT：組み合わせ不可（技術的制約）
- ディーゼル × CVT：組み合わせ不可（技術的制約）
- 1.5Lエンジン × 18インチタイヤ：非推奨（性能低下）
- スポーツタイヤ × 高性能ブレーキ：推奨

### 過去事例
- 1.5L + CVT：多数の成功実績（リスクスコア: 1）
- 2.0L + スポーツタイヤ：振動問題の報告（リスクスコア: 6）
- ハイブリッド + CVT：高評価（リスクスコア: 2）

## プロジェクト構造

```
ccw-feature_explore/
├── src/
│   ├── components/          # Reactコンポーネント
│   │   ├── TreeView.tsx        # 木構造表示
│   │   ├── ConstraintsPanel.tsx # 制約・過去事例表示
│   │   └── EvaluationPanel.tsx  # 評価実行・結果表示
│   ├── types/               # TypeScript型定義
│   │   └── index.ts
│   ├── data/                # サンプルデータ
│   │   └── sampleData.ts
│   ├── utils/               # ユーティリティ関数
│   │   └── evaluation.ts    # 評価ロジック
│   ├── App.tsx              # メインアプリケーション
│   ├── main.tsx             # エントリーポイント
│   └── index.css            # グローバルスタイル
├── index.html
├── vite.config.ts
├── tsconfig.json
├── tailwind.config.js
└── package.json
```

## 使い方

1. **部品を選択**：左ペインの各選択ポイントでドロップダウンから部品を選択
2. **制約を確認**：右ペイン上部で適用される制約と過去事例を確認
3. **評価を実行**：右ペイン下部の「制約評価を実行」ボタンをクリック
4. **結果を確認**：
   - 合計価格と内訳
   - リスクスコア
   - 制約違反の有無
   - 警告メッセージ

## 今後の拡張可能性

- Z3ソルバーやSHACLを使った高度な制約評価
- 次に選択すべき部品のナビゲーション機能
- 最適な構成の自動提案
- 構成の保存・読み込み機能
- 複数構成の比較機能
- グラフィカルな可視化の強化（React Flowの活用）

## ライセンス

ISC
